<html>
<head>
<title>Pong</title>
<script src="https://simplycodingcourses.com/files/simplyjs/simply.js"> </script>
<script>
function start(){
sjs.open("target",550,450);

//Background Music
var playM = new Audio('Music/holiday.mp3');
var toggle = true;
var musicOn = false;
sjs.keyDown(SPACE_KEY, function(){
if(toggle == true){
if(musicOn == false){
playM.play();
musicOn = true;
} else {
playM.pause();
musicOn = false;
}
toggle = false;
setTimeout(function(){
toggle = true;
},1000);
} //end if toggle statement
}); //end keyDown function

var playM1 = new Audio('Music/mood.mp3');
var toggle = true;
var musicOn = false;
sjs.keyDown(M_KEY, function(){
if(toggle == true){
if(musicOn == false){
playM1.play();
musicOn = true;
} else {
playM1.pause();
musicOn = false;
}
toggle = false;
setTimeout(function(){
toggle = true;
},1000);
} //end if toggle statement
}); //end keyDown function

var soundEffect1 = new Audio('Music/bruh.mp3');

sjs.keyDown(B_KEY,function(){
soundEffect1.play();
});

var soundEffect2 = new Audio('Music/oof.mp3');

sjs.keyDown(O_KEY,function(){
soundEffect2.play();
});






var background = new sjs.Image("Images/space5.png");
background.setSize(sjs.getWidth(), sjs.getHeight());


//Ball Object & Properties
var ball = new sjs.Image("Images/pizza.png");
ball.type = "ball";
ball.setSize(50,50);
ball.center();
ball.friction=-0.001;
ball.pushUp(3);
ball.pushRight(3);
ball.bounce();

//Paddle 1
var paddle1 = new sjs.Image("Images/paddle.png");
paddle1.type="paddle"
paddle1.centerH();
paddle1.setSize(100,20);

//Paddle 2
var paddle2 = new sjs.Image("Images/paddle2.png");
paddle2.type="paddle"
paddle2.center().bottom();
paddle2.setSize(100,20)
sjs.keyDown(LEFT_KEY, function(){
paddle1.pushLeft();
paddle2.pushLeft();
});

sjs.keyDown(RIGHT_KEY, function(){
paddle1.pushRight();
paddle2.pushRight();
});

sjs.keyDown(W_KEY, function(){
paddle1.moveTo(ball.getX(), (paddle1.getY()));
paddle2.moveTo(ball.getX(), (paddle2.getY()));
});


//Sounds
var soundEffect = new Audio('Music/oof.mp3');

sjs.onHit("ball","paddle", function(ball,paddle){
score = score + 1;
score_txt.setText("Score: "+score);
if(score == 30){
var newball = new sjs.Image("Images/spike.png");
newball.type = "newball";
newball.setSize(50,50);
newball.center();
newball.friction = 0;
newball.bounce();
newball.pushLeft(3);
newball.pushUp(4);

sjs.onHit("newball",["top_screen","bottom_screen"], function(){
window.location = "gameover.html";
});
}
soundEffect.play();
sjs.bounceOff(ball,paddle);
});

sjs.onHit("newball","paddle", function(newball,paddle){
score = score + 1;
score_txt.setText("Score: "+score);
sjs.bounceOff(newball,paddle);
});

sjs.onHit("newball","ball", function(newball,ball){
sjs.bounceOff(newball,ball);
});

sjs.onHit("ball",["top_screen","bottom_screen"], function(){
window.location = "gameover.html";
localStorage.setItem("score", score);
});

//Score
var score=0;
var score_txt = new sjs.Text("Score: 0", 21, "orange");
}
//end start
</script>
</head>
<body onload="start()" style="margin:auto;background:lightgreen;">
<h1> Pong </h1>
  <center><a href="https://hotfalcon.github.io">Back</a></center>

<div id="target" style="margin:auto;background:grey;"></div>
<br/>
<div id="output" style="margin:0 50 0 50;"></div>
<br/><br/>
</body>
</html>
